set_num_threads(1)
set_memory(4203741184)

set { reference rks }
set { basis cc-pVDZ }

molecule MOL {
    0 1
    noreorient
    nocom
    symmetry c1
    O    1.141000   0.017000   0.083000
    C    2.558000   0.086000  -0.005000
    C    3.192000  -0.789000   1.067000
    O    3.182687  -2.150385   0.654797
    H    0.789000   0.590000  -0.620000
    H    2.874000   1.128000   0.115000
    H    2.871000  -0.243000  -1.001000
    H    2.644093  -0.695833   2.009897
    H    4.226625  -0.478354   1.251193
    H    3.596459  -2.661110   1.372320
}

set optking { frozen_dihedral = (" 1 2 3 4 ") }

energy, wfn = energy('B3LYP-D3', return_wfn=True)

import os
os.chdir(os.environ['HTMD_PSI4_WORKDIR'])

oeprop(wfn, 'DIPOLE', 'QUADRUPOLE', 'MULLIKEN_CHARGES')

with open('psi4out.xyz', 'w') as f:
    f.write('10 ' )
    f.write('%.12f\n' % energy)
    f.write(MOL.save_string_xyz())
